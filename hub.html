<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>StudentStream â€“ Early Access Hub</title>

<style>
body {
  margin: 0;
  font-family: system-ui, -apple-system, BlinkMacSystemFont, sans-serif;
  background: radial-gradient(circle at top, #1c2452, #0b1024);
  color: white;
}
.hidden{display:none}
.container{max-width:900px;margin:auto;padding:24px}
.card{background:rgba(255,255,255,0.08);border-radius:18px;padding:20px;margin-bottom:20px;backdrop-filter:blur(12px)}
button{border:none;padding:10px 16px;border-radius:12px;background:linear-gradient(135deg,#6a7cff,#8f6bff);color:#fff;font-weight:600;cursor:pointer}
input,select{width:100%;padding:10px;border-radius:10px;border:none;margin-bottom:10px}
.badge{background:#6a7cff;padding:6px 12px;border-radius:10px;font-weight:bold;display:inline-block}
.owner{background:gold;color:black}
.row{display:flex;gap:10px;flex-wrap:wrap}
.chat-box{max-height:200px;overflow-y:auto;margin-bottom:10px;font-size:14px}
.chat-msg{margin-bottom:6px}
.progress{background:#222;border-radius:8px;overflow:hidden}
.bar{background:#6a7cff;height:10px}
.small{opacity:.7;font-size:13px}
</style>
</head>
<nav class="mobile-nav">
  <a href="#" class="nav-item active">ğŸ <span>Home</span></a>
  <a href="#updates" class="nav-item">ğŸ› ï¸<span>Updates</span></a>
  <a href="#vote" class="nav-item">ğŸ—³ï¸<span>Vote</span></a>
  <a href="#roadmap" class="nav-item">ğŸ—ºï¸<span>Roadmap</span></a>
  <a href="#profile" class="nav-item">ğŸ‘¤<span>Profile</span></a>
</nav>
<body>

<div id="accessScreen" class="container hidden">
  <div class="card">
    <h2>ğŸ” Early Access Verification</h2>
    <p>Enter the email you used for the waitlist</p>
    <input type="email" id="emailInput" placeholder="you@example.com">
    <select id="roleInput">
      <option value="">Select role</option>
      <option>Streamer</option>
      <option>Creator</option>
      <option>Musician</option>
      <option>Designer</option>
      <option>Brand</option>
    </select>
    <button onclick="verifyAccess()">Access Hub</button>
  </div>
</div>

<div id="hub" class="container hidden">

  <div class="card">
    <h1>Welcome, <span id="userEmail"></span> ğŸ‘‹</h1>
    <span class="badge">Early Access</span>
    <span id="ownerBadge" class="badge owner hidden">OWNER</span>
    <p>Role: <b id="userRole"></b></p>
  </div>

  <div class="card">
    <h2>ğŸš§ Dev Updates</h2>
    <ul id="updatesList"></ul>
    <div id="adminUpdate" class="hidden">
      <input id="newUpdate" placeholder="Post new update">
      <button onclick="addUpdate()">Post</button>
    </div>
  </div>

  <div class="card">
    <h2>ğŸ’¡ Vote on features</h2>
    <div>Discovery Feed <button onclick="vote('feed')">Vote</button> <span id="vote_feed">0</span></div><br>
    <div>Brand Marketplace <button onclick="vote('brand')">Vote</button> <span id="vote_brand">0</span></div><br>
    <div>Collab Matching <button onclick="vote('collab')">Vote</button> <span id="vote_collab">0</span></div>
  </div>

  <div class="card">
    <h2>ğŸ—º Roadmap</h2>
    <p>Profiles</p><div class="progress"><div class="bar" style="width:60%"></div></div>
    <p>Marketplace</p><div class="progress"><div class="bar" style="width:35%"></div></div>
    <p>Payments</p><div class="progress"><div class="bar" style="width:10%"></div></div>
  </div>

  <div class="card">
    <h2>ğŸ›’ Marketplace Preview</h2>
    <ul>
      <li>ğŸ® Streamers hiring editors</li>
      <li>ğŸµ Musicians promoting tracks</li>
      <li>ğŸ¨ Designers offering services</li>
      <li>ğŸ· Brands hiring creators</li>
    </ul>
  </div>

  <div class="card">
    <h2>ğŸ’¬ Community Chat</h2>
    <div class="chat-box" id="chatBox"></div>
    <input id="chatInput" placeholder="Type message">
    <button onclick="sendChat()">Send</button>
    <button onclick="clearChat()" id="clearChatBtn" class="hidden">Clear Chat</button>
  </div>

  <div class="card hidden" id="adminPanel">
    <h2>ğŸ›  Owner Controls</h2>
    <button onclick="resetVotes()">Reset Votes</button>
    <button onclick="logout()">Logout</button>
  </div>

  <p class="small">You're shaping StudentStream.</p>

</div>

<script>
/* ======================
   CONFIG
====================== */
const OWNER_EMAIL = "deondrechambers284@gmail.com";

/* ======================
   HELPERS
====================== */
const $ = id => document.getElementById(id);
const get = key => JSON.parse(localStorage.getItem(key));
const set = (key,val) => localStorage.setItem(key,JSON.stringify(val));

function today(){
  return new Date().toLocaleDateString();
}

/* ======================
   INIT
====================== */
function init(){
  const email = localStorage.getItem("ss_email");
  const role = localStorage.getItem("ss_role");

  if(!email){
    $("accessScreen").classList.remove("hidden");
    return;
  }

  loadHub(email, role);
}

function verifyAccess(){
  const email = $("emailInput").value.trim();
  const role = $("roleInput").value || "Member";

  if(!email){ alert("Enter email"); return; }

  localStorage.setItem("ss_email", email);
  localStorage.setItem("ss_role", role);

  if(!get("profiles")) set("profiles", {});
  if(!get("votes")) set("votes", {});
  if(!get("updates")) set("updates", []);
  if(!get("chat")) set("chat", []);
  if(!get("features")) set("features", []);

  loadHub(email, role);
}

function loadHub(email, role){
  $("accessScreen").classList.add("hidden");
  $("hub").classList.remove("hidden");

  $("userEmail").innerText = email;
  $("userRole").innerText = role;

  if(email === OWNER_EMAIL){
    $("ownerBadge").classList.remove("hidden");
    $("adminPanel").classList.remove("hidden");
    $("adminUpdate").classList.remove("hidden");
    $("clearChatBtn").classList.remove("hidden");
    renderOwnerStats();
  }

  renderStatus();
  loadVotes();
  loadUpdates();
  loadChat();
  loadProfile();
  loadFeatureBoard();
}

/* ======================
   STATUS SYSTEM
====================== */
function renderStatus(){
  let score = 0;
  if(get("votes")) score += Object.keys(get("votes")).length;
  if(get("chat")?.length) score += 2;

  let status = "Explorer";
  if(score >= 3) status = "Builder";
  if(score >= 6) status = "Pioneer";

  const badge = document.createElement("div");
  badge.className = "badge";
  badge.innerText = status;
  $("userRole").append(" Â· ", status);
}

/* ======================
   LOGOUT
====================== */
function logout(){
  localStorage.clear();
  location.reload();
}

/* ======================
   VOTING
====================== */
function vote(feature){
  let votes = get("votes") || {};

  if(votes[feature]){
    alert("Already voted");
    return;
  }

  let counts = get("voteCounts") || {};
  counts[feature] = (counts[feature] || 0) + 1;

  votes[feature] = true;

  set("votes", votes);
  set("voteCounts", counts);

  loadVotes();
}

function loadVotes(){
  const counts = get("voteCounts") || {};
  ["feed","brand","collab"].forEach(f=>{
    const el = $("vote_"+f);
    if(el) el.innerText = counts[f] || 0;
  });
}

function resetVotes(){
  set("votes", {});
  set("voteCounts", {});
  loadVotes();
}

/* ======================
   DEV UPDATES
====================== */
function addUpdate(){
  const txt = $("newUpdate").value.trim();
  if(!txt) return;

  let updates = get("updates") || [];
  updates.unshift(`[${today()}] ${txt}`);
  set("updates", updates);

  $("newUpdate").value = "";
  loadUpdates();
}

function loadUpdates(){
  const ul = $("updatesList");
  if(!ul) return;

  ul.innerHTML = "";
  (get("updates") || []).forEach(u=>{
    const li = document.createElement("li");
    li.textContent = u;
    ul.appendChild(li);
  });
}

/* ======================
   CHAT
====================== */
function sendChat(){
  const msg = $("chatInput").value.trim();
  if(!msg) return;

  const email = localStorage.getItem("ss_email");
  let chat = get("chat") || [];

  chat.push(`${email}: ${msg}`);
  set("chat", chat);

  $("chatInput").value = "";
  loadChat();
}

function loadChat(){
  const box = $("chatBox");
  if(!box) return;

  box.innerHTML = "";
  (get("chat") || []).forEach(m=>{
    const d = document.createElement("div");
    d.className = "chat-msg";
    d.textContent = m;
    box.appendChild(d);
  });
  box.scrollTop = box.scrollHeight;
}

function clearChat(){
  set("chat", []);
  loadChat();
}

/* ======================
   PROFILES
====================== */
function saveProfile(name,bio,skills,link){
  const email = localStorage.getItem("ss_email");
  let profiles = get("profiles") || {};

  profiles[email] = {name,bio,skills,link};
  set("profiles", profiles);

  alert("Profile saved!");
}

function loadProfile(){
  const email = localStorage.getItem("ss_email");
  const profiles = get("profiles") || {};

  if(profiles[email]){
    console.log("Profile loaded:", profiles[email]);
  }
}

/* ======================
   FEATURE REQUEST BOARD
====================== */
function addFeature(title){
  if(!title) return;

  let board = get("features") || [];
  board.push({title, votes:0});
  set("features", board);
  loadFeatureBoard();
}

function voteFeature(i){
  let board = get("features") || [];
  board[i].votes++;
  set("features", board);
  loadFeatureBoard();
}

function loadFeatureBoard(){
  const list = $("featureBoard");
  if(!list) return;

  list.innerHTML = "";
  (get("features") || []).forEach((f,i)=>{
    const div = document.createElement("div");
    div.innerHTML = `${f.title} â€” ${f.votes} <button onclick="voteFeature(${i})">Vote</button>`;
    list.appendChild(div);
  });
}

/* ======================
   OWNER ANALYTICS
====================== */
function renderOwnerStats(){
  const users = Object.keys(get("profiles")||{}).length;
  const chats = (get("chat")||[]).length;
  const votes = Object.keys(get("votes")||{}).length;

  console.log("Owner stats:", {users,chats,votes});
}

/* ======================
   START
====================== */
init();
</script>