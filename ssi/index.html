<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>SS:I — StudentStream Investigations</title>
<meta name="viewport" content="width=device-width, initial-scale=1">
<script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>

<style>
:root{
  --bg:#050b14;
  --panel:rgba(12,22,40,.7);
  --glass:rgba(20,40,80,.35);
  --border:rgba(100,160,255,.25);
  --text:#eaf2ff;
  --muted:#8faad6;
  --accent:#3fa9ff;
  --open:#3bff7a;
  --closed:#ffd23b;
  --classified:#ff4b4b;
}

*{box-sizing:border-box}
body{
  margin:0;
  font-family:Inter,system-ui,Segoe UI,Roboto;
  background:
    radial-gradient(circle at top,#0c1f3f,#050b14 65%),
    #050b14;
  color:var(--text);
}

.hidden{display:none}

/* BOOT */
#boot{
  position:fixed; inset:0;
  background:black;
  color:#00ffc3;
  font-family:monospace;
  padding:30px;
  z-index:50;
}
#boot span{display:block;margin-top:10px}

/* HEADER */
header{
  background:linear-gradient(135deg,#08162c,#0b234a);
  border-bottom:1px solid var(--border);
  padding:18px 22px;
  display:flex;
  align-items:center;
  justify-content:space-between;
}

.brand{
  display:flex;
  align-items:center;
  gap:14px;
}

.brand img{
  width:46px;
  height:46px;
  object-fit:contain;
  filter:drop-shadow(0 0 10px rgba(63,169,255,.5));
}

.brand h1{
  margin:0;
  font-size:1.25rem;
  font-weight:600;
}

.brand small{
  display:block;
  color:var(--muted);
  font-size:.75rem;
}

.status{
  color:#7dffb3;
  font-size:.8rem;
  display:flex;
  align-items:center;
  gap:6px;
}

.status::before{
  content:"";
  width:8px;
  height:8px;
  background:#3bff7a;
  border-radius:50%;
  box-shadow:0 0 10px #3bff7a;
}

/* MAIN */
.container{
  max-width:1100px;
  margin:auto;
  padding:28px 20px 80px;
}

/* HUD panels */
.panel{
  background:linear-gradient(180deg,var(--glass),rgba(5,10,20,.6));
  border:1px solid var(--border);
  border-radius:14px;
  padding:20px;
  box-shadow:0 0 25px rgba(63,169,255,.08);
  margin-bottom:26px;
}

/* Search */
.search{
  width:100%;
  padding:14px 16px;
  border-radius:10px;
  border:1px solid var(--border);
  background:#061225;
  color:var(--text);
  outline:none;
  margin-bottom:25px;
}

/* Stats */
.stats{
  display:grid;
  grid-template-columns:repeat(3,1fr);
  gap:16px;
  margin-bottom:30px;
}
.stat{
  text-align:center;
  padding:18px;
  border-radius:12px;
  background:rgba(15,30,60,.6);
  border:1px solid var(--border);
}
.stat strong{font-size:1.6rem}

/* Case table */
.table{
  width:100%;
  border-collapse:collapse;
}
.table th,.table td{
  padding:12px;
  border-bottom:1px solid rgba(255,255,255,.06);
  text-align:left;
}
.table tr{
  cursor:pointer;
}
.table tr:hover{
  background:rgba(63,169,255,.06);
}

.badge{
  padding:4px 10px;
  border-radius:12px;
  font-size:.7rem;
  text-transform:uppercase;
}

.open{color:var(--open);background:rgba(59,255,122,.12)}
.closed{color:var(--closed);background:rgba(255,210,59,.12)}
.classified{color:var(--classified);background:rgba(255,75,75,.12)}

footer{
  margin-top:60px;
  color:var(--muted);
  font-size:.8rem;
  text-align:center;
}
</style>
</head>
<body>

<!-- BOOT -->
<div id="boot">
> Initializing SS:I secure node...<br>
> Loading intelligence modules...<br>
> Verifying encryption keys...<br>
> Establishing uplink...<br>
<span id="bootDone">> ACCESS GRANTED</span>
</div>

<div id="app" class="hidden">

<header>
  <div class="brand">
    <img src="ssi-logo.png.jpg" alt="SS:I">
    <div>
      <h1>StudentStream Investigations</h1>
      <small>Digital Intelligence & Anomaly Research Division</small>
    </div>
  </div>
  <div class="status">SYSTEM ONLINE</div>
</header>

<div class="container">

<input class="search" id="search" placeholder="Search case files...">

<div class="stats">
  <div class="stat"><strong id="openCount">0</strong><br>Open Cases</div>
  <div class="stat"><strong id="closedCount">0</strong><br>Closed Cases</div>
  <div class="stat"><strong id="totalCount">0</strong><br>Total Cases</div>
</div>

<div class="panel">
  <h2>Mission Brief</h2>
  <p style="color:var(--muted)">
    SS:I is StudentStream’s advanced investigation division focused on documenting
    unexplained events, digital anomalies, emerging phenomena, and real-world cases
    through structured intelligence reporting and public archives.
  </p>
</div>

<div class="panel">
  <h2>Active Case Files</h2>
  <table class="table">
    <thead>
      <tr><th>Case ID</th><th>Title</th><th>Status</th></tr>
    </thead>
    <tbody id="cases"></tbody>
  </table>
</div>

<div class="panel">
  <h2>Video Reports</h2>
  <div id="videos"></div>
</div>

<footer>
© 2026 StudentStream Investigations Division
</footer>

</div>

<script>
const SUPABASE_URL = "https://iabzmoxzbqzcqgypxctr.supabase.co";
const SUPABASE_KEY = "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImlhYnptb3h6YnF6Y3FneXB4Y3RyIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjcxMDgzNzAsImV4cCI6MjA4MjY4NDM3MH0.mHke56jh8WSlzzQxa7o2PIxqLRk1eyPRZerJ3avuGkQ";
const db = supabase.createClient(SUPABASE_URL, SUPABASE_KEY);

// boot
setTimeout(()=>{
  document.getElementById("boot").classList.add("hidden");
  document.getElementById("app").classList.remove("hidden");
  loadCases();
  loadVideos();
},2200);

async function loadCases(){
  const {data} = await db.from("cases").select().order("created_at",{ascending:false});
  const box = document.getElementById("cases");
  let open=0, closed=0;

  box.innerHTML="";
  data.forEach(c=>{
    if(c.status==="open") open++;
    if(c.status==="closed") closed++;

    box.innerHTML+=`
      <tr onclick="openCase('${c.id}')">
        <td>${c.id.slice(0,8).toUpperCase()}</td>
        <td>${c.title}</td>
        <td><span class="badge ${c.status}">${c.status}</span></td>
      </tr>
    `;
  });

  document.getElementById("openCount").textContent=open;
  document.getElementById("closedCount").textContent=closed;
  document.getElementById("totalCount").textContent=data.length;
}

function openCase(id){
  location.href = `case.html?id=${id}`;
}

async function loadVideos(){
  const {data} = await db.from("video_reports").select().order("created_at",{ascending:false});
  const box = document.getElementById("videos");

  if(!data || !data.length){
    box.innerHTML="<p style='color:var(--muted)'>No reports published.</p>";
    return;
  }

  box.innerHTML="";
  data.forEach(v=>{
    box.innerHTML+=`
      <div style="margin-bottom:10px">
        <strong>${v.title}</strong><br>
        <a href="${v.youtube_url}" target="_blank" style="color:var(--accent)">Watch report</a>
      </div>
    `;
  });
}

// search filter
document.getElementById("search").addEventListener("input", e=>{
  const val=e.target.value.toLowerCase();
  document.querySelectorAll("#cases tr").forEach(r=>{
    r.style.display=r.textContent.toLowerCase().includes(val)?"":"none";
  });
});
</script>

</body>
</html>