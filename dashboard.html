<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>StudentStream Dashboard</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<script type="module">
import { platformGuard } from "/js/platform-guard.js";
await platformGuard();
</script>

<style>
:root{
  --bg:#05080f;
  --panel:#0c1626;
  --accent:#4da3ff;
  --text:#eaf1ff;
  --muted:#9fb0cc;
  --border:rgba(255,255,255,0.08);
}

body{
  margin:0;
  font-family:system-ui;
  background:radial-gradient(circle at top,#0c1b33,#05080f 70%);
  color:var(--text);
}

nav{
  display:flex;
  justify-content:space-between;
  padding:16px 22px;
  background:rgba(10,20,40,.7);
  border-bottom:1px solid var(--border);
}

.main{max-width:1000px;margin:auto;padding:28px}

.card{
  background:var(--panel);
  border:1px solid var(--border);
  border-radius:14px;
  padding:18px;
}

.grid{
  display:grid;
  grid-template-columns:repeat(auto-fit,minmax(220px,1fr));
  gap:16px;
}

button{
  background:#1b2a44;
  border:1px solid var(--border);
  color:white;
  padding:8px 14px;
  border-radius:8px;
  cursor:pointer;
}
</style>
</head>

<body>

<nav>
  <strong>StudentStream</strong>
  <button id="logoutBtn">Logout</button>
</nav>

<div class="main">
  <h1>Dashboard</h1>
  <p id="email"></p>
  <div id="role"></div>

  <div class="grid" style="margin-top:20px">

    <div class="card">
      <h3>Studios</h3>
      <a href="/studios/">Open →</a>
    </div>

    <div class="card">
      <h3>Law</h3>
      <a href="/law/">Open →</a>
    </div>

    <div class="card">
      <h3>SS:I</h3>
      <a href="/ssi/">Open →</a>
    </div>

  </div>
</div>

<script type="module">
import { logout } from "/js/auth.js";

document.getElementById("email").textContent = window.currentUser.email;
document.getElementById("role").textContent = "Role: " + window.currentUser.role;

document.getElementById("logoutBtn").onclick = async () => {
  await logout();
  location.replace("/auth/login.html");
};
</script>

</body>
</html>