<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Case File</title>
<script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
<style>
body{background:#050b14;color:#e8f0ff;font-family:system-ui;padding:20px}
.panel{max-width:800px;margin:auto;background:#0b1624;padding:20px;border-radius:10px}
.update{border-left:3px solid #3fa9ff;padding-left:10px;margin:15px 0;color:#cfe2ff}
</style>
</head>
<body>

<div class="panel">
<h1 id="title"></h1>
<p id="desc"></p>
<h3>Status: <span id="status"></span></h3>

<h2>Timeline</h2>
<div id="updates"></div>
</div>

<script>
const urlParams = new URLSearchParams(location.search);
const id = urlParams.get("id");

const db = supabase.createClient("YOUR_URL","YOUR_PUBLIC_KEY");

async function load(){
  const {data:caseData} = await db.from("cases").select().eq("id",id).single();
  document.getElementById("title").innerText = caseData.title;
  document.getElementById("desc").innerText = caseData.description;
  document.getElementById("status").innerText = caseData.status.toUpperCase();

  const {data:updates} = await db.from("case_updates").select().eq("case_id",id).order("created_at");
  const box=document.getElementById("updates");
  updates.forEach(u=>{
    box.innerHTML+=`<div class="update">${u.content}</div>`;
  });
}
load();
</script>
</body>
</html>