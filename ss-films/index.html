<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>SS Films</title>
<meta name="viewport" content="width=device-width, initial-scale=1">

<script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2/dist/umd/supabase.min.js"></script>

<style>
*{box-sizing:border-box;margin:0;padding:0}
body{
  background:#05070d;
  color:#fff;
  font-family:system-ui,Segoe UI,Roboto;
}

header{
  padding:20px 30px;
  font-weight:800;
  font-size:22px;
  background:linear-gradient(180deg,#000,transparent);
  position:fixed;
  width:100%;
  z-index:10;
}

.hero{
  height:70vh;
  background-size:cover;
  background-position:center;
  display:flex;
  align-items:flex-end;
  padding:40px;
}

.hero-box{
  max-width:600px;
}

.hero h1{font-size:42px;margin-bottom:10px}
.hero p{opacity:.85}

.btn{
  display:inline-block;
  margin-top:15px;
  padding:10px 18px;
  border-radius:6px;
  background:#e50914;
  color:white;
  text-decoration:none;
  font-weight:600;
}

.section{
  padding:20px 30px;
}

.row{
  display:flex;
  gap:12px;
  overflow-x:auto;
  padding-top:10px;
}

.card{
  min-width:160px;
  height:230px;
  background:#111;
  border-radius:8px;
  background-size:cover;
  background-position:center;
  cursor:pointer;
  transition:.2s;
}

.card:hover{
  transform:scale(1.05);
}

footer{
  text-align:center;
  padding:40px;
  opacity:.5;
}
</style>
</head>
<body>

<header>SS FILMS</header>

<div class="hero" id="hero"></div>

<div id="content"></div>

<footer>© 2026 StudentStream Films</footer>

<script>
const SUPABASE_URL = "https://iabzmoxzbqzcqgypxctr.supabase.co";
const SUPABASE_KEY = "YOUR_ANON_KEY_HERE";

const supabase = window.supabase.createClient(SUPABASE_URL, SUPABASE_KEY);

async function loadHomepage(){

  // Featured film
  const { data: featured } = await supabase
    .from("films")
    .select("*")
    .eq("is_featured", true)
    .limit(1)
    .single();

  if(featured){
    document.getElementById("hero").style.backgroundImage =
      `linear-gradient(to top,#05070d,transparent), url(${featured.thumbnail_url})`;

    document.getElementById("hero").innerHTML = `
      <div class="hero-box">
        <h1>${featured.title}</h1>
        <p>${featured.description || ""}</p>
        <a class="btn" href="watch.html?id=${featured.id}">▶ Watch</a>
      </div>
    `;
  }

  // Categories
  const { data: categories } = await supabase
    .from("film_categories")
    .select("*");

  const content = document.getElementById("content");

  for(const cat of categories){

    const { data: films } = await supabase
      .from("films")
      .select("*")
      .eq("category_id", cat.id)
      .eq("is_published", true)
      .limit(12);

    if(!films.length) continue;

    const section = document.createElement("div");
    section.className = "section";

    section.innerHTML = `
      <h2>${cat.name}</h2>
      <div class="row">
        ${films.map(f=>`
          <div class="card"
            style="background-image:url('${f.thumbnail_url}')"
            onclick="location.href='watch.html?id=${f.id}'">
          </div>
        `).join("")}
      </div>
    `;

    content.appendChild(section);
  }
}

loadHomepage();
</script>

</body>
</html>